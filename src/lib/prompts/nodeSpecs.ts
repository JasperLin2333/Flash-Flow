export const NODE_SPECS = `
# ğŸ“¦ èŠ‚ç‚¹å‚æ•°è¯¦è§£ (Strict Code-Grounding)

## 1. Input èŠ‚ç‚¹

### 1.0 å‚æ•°è¡¨
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å–å€¼èŒƒå›´/è¯´æ˜ |
|------|------|-------|-------------|
| \`enableTextInput\` | boolean | \`true\` | å¯ç”¨æ–‡æœ¬è¾“å…¥æ¡† |
| \`enableFileInput\` | boolean | \`false\` | å¯ç”¨æ–‡ä»¶ä¸Šä¼  |
| \`enableStructuredForm\` | boolean | \`false\` | å¯ç”¨ç»“æ„åŒ–è¡¨å•ï¼šé¢„ç½®é…ç½®å‚æ•°ï¼ˆé€‰é¡¹/æ•°å€¼ï¼‰ï¼Œè¿è¡Œæ—¶è‡ªåŠ¨å¼¹çª—é‡‡é›†ï¼Œä¾›ä¸‹æ¸¸åˆ†æ”¯åˆ¤æ–­æˆ– LLM å¼•ç”¨ |
| \`greeting\` | string | \`"æˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œè¯·å‘Šè¯‰æˆ‘æ‚¨çš„éœ€æ±‚ã€‚"\` | æ‹›å‘¼è¯­ï¼Œå¼•å¯¼ç”¨æˆ·å¦‚ä½•ä½¿ç”¨è¯¥åŠ©æ‰‹ |
| \`fileConfig.allowedTypes\` | string[] | \`["*/*"]\` | å…è®¸çš„æ–‡ä»¶ç±»å‹ |
| \`fileConfig.maxSizeMB\` | number | \`100\` | å•æ–‡ä»¶æœ€å¤§ä½“ç§¯ (MB) |
| \`fileConfig.maxCount\` | number | \`10\` | æœ€å¤§æ–‡ä»¶æ•°é‡ |

> ğŸ”´ **è¾“å…¥é…ç½®é“å¾‹**
> - æ¶‰åŠ **æ–‡ä»¶/å›¾ç‰‡/æ–‡æ¡£** â†’ \`enableFileInput: true\` + \`fileConfig.allowedTypes\`
> - æ¶‰åŠ **å¯é€‰æ¨¡å¼/é£æ ¼/ç­–ç•¥ç­‰é¢„è®¾é€‰é¡¹** â†’ \`enableStructuredForm: true\` + \`formFields\`
>   - å…¸å‹åœºæ™¯ï¼šåˆ†ææ¨¡å¼(åŸºæœ¬é¢/æŠ€æœ¯é¢)ã€é£é™©åå¥½(ä¿å®ˆ/æ¿€è¿›)ã€è¾“å‡ºé£æ ¼(ç®€æ´/è¯¦ç»†)ã€è¯­è¨€é€‰æ‹©
> - **greeting** æ‹›å‘¼è¯­ï¼šæ ¹æ®åº”ç”¨åœºæ™¯ï¼Œç”¨ 1-2 å¥è¯å¼•å¯¼ç”¨æˆ·å¦‚ä½•ä½¿ç”¨è¯¥åŠ©æ‰‹ï¼Œä¾‹å¦‚ï¼š
>   - ç¿»è¯‘åŠ©æ‰‹ â†’ "è¯·è¾“å…¥éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼Œæˆ‘ä¼šå¸®æ‚¨ç¿»è¯‘æˆç›®æ ‡è¯­è¨€"
>   - æ–‡æ¡£åˆ†æ â†’ "è¯·ä¸Šä¼ æ‚¨çš„æ–‡æ¡£ï¼Œæˆ‘å°†å¸®æ‚¨æå–å…³é”®ä¿¡æ¯å¹¶è¿›è¡Œåˆ†æ"
>   - æ™ºèƒ½å®¢æœ â†’ "æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é—®æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›ä¸ºæ‚¨è§£ç­”"

### 1.1 allowedTypes å¸¸ç”¨å€¼
| æ–‡ä»¶ç±»å‹ | allowedTypes |
|---------|-------------|
| å›¾ç‰‡ | \`[".jpg", ".jpeg", ".png", ".webp"]\` |
| æ–‡æ¡£ | \`[".pdf", ".docx", ".doc"]\` |
| è¡¨æ ¼ | \`[".csv", ".xlsx", ".xls"]\` |


### 1.2 formFields å­—æ®µç±»å‹
| type | è¯´æ˜ | å¿…å¡«å±æ€§ | å¯é€‰å±æ€§ |
|------|------|---------|---------|
| \`text\` | æ–‡æœ¬è¾“å…¥æ¡† | \`name\`, \`label\` | \`required\`, \`defaultValue\`, \`placeholder\` |
| \`select\` | ä¸‹æ‹‰é€‰æ‹© | \`name\`, \`label\`, \`options\`[] | \`required\`, \`defaultValue\` |
| \`number\` | æ•°å­—è¾“å…¥ | \`name\`, \`label\` | \`required\`, \`defaultValue\`, \`min\`, \`max\` |

### 1.3 å®Œæ•´é…ç½®ç¤ºä¾‹
\`\`\`json
{"id": "input_1", "type": "input", "data": {
  "label": "ç”¨æˆ·è¾“å…¥",
  "enableTextInput": true,
  "enableFileInput": true,
  "fileConfig": {"allowedTypes": [".pdf", ".docx"], "maxSizeMB": 10, "maxCount": 5},
  "enableStructuredForm": true,
  "formFields": [
    {"type": "text", "name": "stock", "label": "è‚¡ç¥¨ä»£ç ", "required": true, "placeholder": "å¦‚ï¼šAAPL"},
    {"type": "select", "name": "mode", "label": "åˆ†ææ¨¡å¼", "options": ["åŸºæœ¬é¢", "æŠ€æœ¯é¢", "ç»¼åˆ"], "defaultValue": "ç»¼åˆ"}
  ]
}}
\`\`\`

## 2. LLM èŠ‚ç‚¹

### 2.0 å‚æ•°è¡¨
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å–å€¼èŒƒå›´/è¯´æ˜ |
|------|------|-------|-------------|
| \`model\` | string | \`deepseek-ai/DeepSeek-V3.2\` | è§ä¸‹æ–¹å¯ç”¨æ¨¡å‹åˆ—è¡¨ |
| \`temperature\` | number | \`0.7\` | 0.0-1.0 (ä½=ç¡®å®šæ€§, é«˜=åˆ›é€ æ€§) |
| \`systemPrompt\` | string | \`""\` | ç³»ç»Ÿæç¤ºè¯ï¼Œæ”¯æŒ \`{{å˜é‡}}\` |
| \`enableMemory\` | boolean | \`false\` | æ˜¯å¦å¯ç”¨å¤šè½®å¯¹è¯è®°å¿† |
| \`memoryMaxTurns\` | number | \`10\` | 1-20, æœ€å¤§è®°å¿†è½®æ•° |
| \`inputMappings.user_input\` | string | å¯é€‰ | ç”¨æˆ·æ¶ˆæ¯æ¥æºï¼Œå¦‚ \`{{ç”¨æˆ·è¾“å…¥.user_input}}\` |

> ğŸ”´ **user_input é…ç½®é“å¾‹ - äºŒé€‰ä¸€ï¼Œç¦æ­¢é‡å¤ï¼**
> 
> ç”¨æˆ·è¾“å…¥åªèƒ½é€šè¿‡**ä¸€ç§æ–¹å¼**ä¼ é€’ç»™ LLMï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼**äº’æ–¥**ï¼š
> 
> | æ–¹å¼ | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
> |------|---------|------|
> | **A. inputMappings.user_input** | ç®€å•å¯¹è¯/é—®ç­”ï¼Œç”¨æˆ·æ¶ˆæ¯ä½œä¸ºç‹¬ç«‹çš„ user è§’è‰²å‘é€ | \`inputMappings: {user_input: "{{ç”¨æˆ·è¾“å…¥.user_input}}"}\` |
> | **B. systemPrompt å†…å¼•ç”¨** | å¤æ‚åœºæ™¯ï¼Œç”¨æˆ·è¾“å…¥éœ€è¦ä¸å…¶ä»–ä¸Šä¸‹æ–‡ç»„åˆ | \`systemPrompt: "åˆ†æ {{è¾“å…¥.user_input}} ç»“åˆ {{æœç´¢.results}}..."\` |
> 
> âŒ **ä¸¥ç¦åŒæ—¶ä½¿ç”¨ A+B**: ä¼šå¯¼è‡´ç”¨æˆ·è¾“å…¥è¢«é‡å¤å‘é€ä¸¤æ¬¡ï¼
> 
> **åœºæ™¯é€‰æ‹©æŒ‡å—**:
> - çº¯å¯¹è¯/èŠå¤©/é—®ç­”åŠ©æ‰‹ â†’ ä½¿ç”¨ **A** (é…ç½® inputMappings.user_input)
> - å¤šæ­¥éª¤å·¥å…·é“¾ (systemPrompt å·²å¼•ç”¨ç”¨æˆ·è¾“å…¥å˜é‡) â†’ ä½¿ç”¨ **B** (ä¸é…ç½® inputMappings.user_input)
> - æ–‡ä»¶/å›¾ç‰‡å¤„ç† â†’ **å¿…é¡»**å…ˆæ¥ RAG èŠ‚ç‚¹ï¼ŒLLM å¼•ç”¨ \`{{RAG.documents}}\`

### 2.1 å¯ç”¨æ¨¡å‹åˆ—è¡¨ (å¿…é¡»ä»æ­¤åˆ—è¡¨é€‰æ‹©)
| model å€¼ | è¯´æ˜ |
|---------|------|
| \`deepseek-ai/DeepSeek-V3.2\` | DeepSeek-V3.2 (SiliconFlow) - é»˜è®¤ |
| \`deepseek-v3-2-251201\` | DeepSeek-V3.2 (ç«å±±å¼•æ“) |
| \`deepseek-chat\` | DeepSeek-V3.2 (å®˜æ–¹) |
| \`doubao-1-5-pro-32k-character-250715\` | doubao-1.5-pro |
| \`doubao-seed-1-6-flash-250828\` | doubao-seed-1.6-flash |
| \`qwen-flash\` | åƒé—®æ¨¡å‹-å¿«é€Ÿ |

> ğŸ”´ **æ–‡ä»¶/å›¾ç‰‡å¤„ç†ä¸è¦é€‰è§†è§‰æ¨¡å‹**: LLM æ— æ³•ç›´æ¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¿…é¡»å…ˆé€šè¿‡ RAG èŠ‚ç‚¹è§£æ

### 2.2 è®°å¿†åŠŸèƒ½é…ç½®é“å¾‹ ğŸ§ 

> ğŸ”´ **enableMemory é…ç½®é“å¾‹**
> - å®¢æœ/å¯¹è¯/èŠå¤©/å’¨è¯¢/é—®ç­”/åŠ©æ‰‹ â†’ \`enableMemory: true\`
> - ç¿»è¯‘/æ‘˜è¦/åˆ†ç±»/æå–/è¯†åˆ«/åˆ†æ â†’ \`enableMemory: false\`

### 2.3 SystemPrompt æœ€ä½³å®è·µ
1. **å¿…é¡»åŒ…å«ä¸šåŠ¡é€»è¾‘**: æ˜ç¡®"ä½ æ˜¯è°"ã€"ä»»åŠ¡ç›®æ ‡"ã€"è¾“å‡ºæ ¼å¼"
2. **ç¦æ­¢**ä»…å†™ "ä½ æ˜¯åŠ©æ‰‹"ï¼Œ**ç¦æ­¢**ä½¿ç”¨æ•°ç»„ä¸‹æ ‡ \`files[0].name\`

## 3. RAG èŠ‚ç‚¹ (Gemini æ£€ç´¢å¢å¼º)

> ğŸ”´ **RAG æ¨¡å¼é…ç½®é“å¾‹ - æ ¹æ®åœºæ™¯é€‰æ‹©ï¼**
> - ç”¨æˆ·**ä¸Šä¼ æ–‡ä»¶**éœ€è¦åˆ†æ â†’ åŠ¨æ€æ¨¡å¼ï¼šé…ç½® \`inputMappings.files\`
> - éœ€è¦æ£€ç´¢**é¢„è®¾çŸ¥è¯†åº“** â†’ é™æ€æ¨¡å¼ï¼šä¸é…ç½® \`inputMappings.files\` (éœ€åœ¨ UI é¢„ä¸Šä¼ )
> - **query å¿…å¡«**: æ£€ç´¢æŸ¥è¯¢å†…å®¹ä¸èƒ½ä¸ºç©ºï¼
>
> ğŸ”´ **æ–‡ä»¶/å›¾ç‰‡å¤„ç†é“å¾‹ - å¿…é¡»ä½¿ç”¨ RAG èŠ‚ç‚¹ï¼**
> - æ¶‰åŠ**æ–‡æ¡£åˆ†æã€PDFæå–ã€æ–‡ä»¶é—®ç­”** â†’ **å¿…é¡»**ä½¿ç”¨ RAG èŠ‚ç‚¹å¤„ç†æ–‡ä»¶
> - æ¶‰åŠ**å›¾ç‰‡ç†è§£ã€å›¾ç‰‡å†…å®¹æå–** â†’ **å¿…é¡»**ä½¿ç”¨ RAG èŠ‚ç‚¹å¤„ç†å›¾ç‰‡
> - âŒ **ç¦æ­¢**ç›´æ¥å°† \`{{xx.files}}\` ä¼ ç»™ LLM èŠ‚ç‚¹ï¼ŒLLM æ— æ³•ç›´æ¥è¯»å–æ–‡ä»¶å†…å®¹
> - âœ… æ­£ç¡®æµç¨‹: Input(ä¸Šä¼ æ–‡ä»¶) â†’ RAG(æ£€ç´¢/è§£æ) â†’ LLM(åŸºäº \`{{RAG.documents}}\` åˆ†æ)

### 3.1 å‚æ•°é™åˆ¶
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | å–å€¼èŒƒå›´ | è¯´æ˜ |
|------|------|-------|---------|------|
| \`maxTokensPerChunk\` | number | 200 | 50-500 | é™æ€åˆ†å—å¤§å° (tokens) |
| \`maxOverlapTokens\` | number | 20 | 0-100 | é™æ€åˆ†å—é‡å  (tokens) |

### 3.2 æ¨¡å¼é…ç½®
| æ¨¡å¼ | åœºæ™¯ | inputMappings |
|------|------|---------------|
| **åŠ¨æ€** | ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶åˆ†æ | \`query: "{{ç”¨æˆ·è¾“å…¥.user_input}}"\` + \`files: "{{ç”¨æˆ·è¾“å…¥.files}}"\` |
| **é™æ€** | å›ºå®šçŸ¥è¯†åº“æ£€ç´¢ | \`query: "{{ç”¨æˆ·è¾“å…¥.user_input}}"\` |

> ğŸ’¡ **query é…ç½®æç¤º**: \`query\` é€šå¸¸å¼•ç”¨ç”¨æˆ·çš„æ–‡æœ¬è¾“å…¥ä½œä¸ºæ£€ç´¢å…³é”®è¯

### 3.3 è¾“å‡ºå˜é‡
- \`{{xx.documents}}\`: æ£€ç´¢åˆ°çš„æ–‡æ¡£ç‰‡æ®µåˆ—è¡¨
- \`{{xx.citations}}\`: å¼•ç”¨æ¥æºä¿¡æ¯

## 4. Tool èŠ‚ç‚¹
æ ¹æ® \`registry.ts\` ä¸¥æ ¼åŒ¹é…å‚æ•°ï¼š

> âš ï¸ **å‚æ•°ç±»å‹é“å¾‹**:
> 1. **æ•°å€¼å‹å‚æ•°** (å¦‚ \`maxResults\`, \`maxLength\`): å¿…é¡»å¡«å…¥**é™æ€æ•°å€¼** (Number)ï¼Œ**ç¦æ­¢**ä½¿ç”¨ \`{{å˜é‡}}\` (å¼•æ“ä¸æ”¯æŒ String->Number è‡ªåŠ¨è½¬æ¢)ã€‚
> 2. **å¤æ‚å¯¹è±¡/æ•°ç»„**: å¿…é¡»å¡«å…¥é™æ€ JSONï¼Œ**ç¦æ­¢**å†…éƒ¨å¼•ç”¨å˜é‡ (å¼•æ“ä¸é€’å½’è§£æ)ã€‚

| å·¥å…·ID/Type | è¯´æ˜ | é€‚ç”¨åœºæ™¯ | å¿…å¡« inputs | é€‰å¡« inputs | è¾“å‡ºå˜é‡ (ç¤ºä¾‹) |
|--------|------|---------|-------------|------------|---------|
| \`web_search\` | å…³é”®è¯æœç´¢ | "æœç´¢XX"ã€"æŸ¥æ‰¾XXä¿¡æ¯" | \`query\`(æœç´¢è¯) | \`maxResults\`(Integer, 1-10, é»˜è®¤5) | \`{{èŠ‚ç‚¹.results}}\`(æ•°ç»„) |
| \`url_reader\` | è¯»å–ç½‘é¡µ | "è¯»å–è¿™ä¸ªé“¾æ¥"ã€ç»™äº†å…·ä½“URL | \`url\`(å®Œæ•´URL) | \`maxLength\`(Integer, 100-50000, é»˜è®¤5000) | \`{{èŠ‚ç‚¹.content}}\`(å­—ç¬¦ä¸²) |
| \`calculator\` | æ•°å­¦è®¡ç®— | è®¡ç®—è¡¨è¾¾å¼ | \`expression\` | - | \`{{èŠ‚ç‚¹.result}}\` (æ•°å€¼) |
| \`datetime\` | æ—¶é—´æ“ä½œ | è·å–/è®¡ç®—æ—¥æœŸæ—¶é—´ | - | **now**(é»˜è®¤): \`format\`; **format**: \`date\`,\`format\`; **diff**: \`date\`,\`targetDate\`; **add**: \`date\`,\`format\`,\`amount\`,\`unit\` | \`{{èŠ‚ç‚¹.formatted}}\` |
| \`code_interpreter\` | Pythonæ‰§è¡Œ | æ•°æ®åˆ†æ/ç”Ÿæˆå›¾è¡¨ | \`code\` | \`outputFileName\`, \`inputFiles\` | \`{{èŠ‚ç‚¹.result}}\` |

> **âš ï¸ Code Interpreter æœ€ä½³å®è·µ**:
> ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ\`code\` å‚æ•°ä¸åº”ç¡¬ç¼–ç ã€‚**å¿…é¡»**å…ˆè¿æ¥ä¸€ä¸ª "Coder LLM"ï¼ˆè´Ÿè´£å†™ä»£ç ï¼‰ï¼Œç„¶ååœ¨æ­¤èŠ‚ç‚¹å¼•ç”¨ \`{{CoderNode.response}}\` æ‰§è¡Œã€‚

## 5. Branch èŠ‚ç‚¹

> ğŸ”´ **ä¸¥ç¦ä½¿ç”¨ \`&&\`/\`||\` ç­‰é€»è¾‘è¿ç®—ç¬¦ï¼** ä»…æ”¯æŒå•ä¸€è¡¨è¾¾å¼ï¼Œå¤åˆé€»è¾‘éœ€ä¸²è”å¤šä¸ª Branch

### 5.1 å‚æ•°
| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| \`condition\` | string | åˆ¤æ–­æ¡ä»¶ (ç©ºåˆ™è¿”å› true) |

### 5.2 æ”¯æŒçš„è¡¨è¾¾å¼æ ¼å¼ (ä»… 5 ç§)

1. **å­—ç¬¦ä¸²æ£€æŸ¥**: \`Node.field.includes('xx')\` / \`.startsWith('xx')\` / \`.endsWith('xx')\`
   - âœ… \`ç”¨æˆ·è¾“å…¥.user_input.includes('http')\`
   - âŒ \`xx.includes('http://') || xx.includes('https://')\`

2. **ç›¸ç­‰åˆ¤æ–­**: \`Node.field === value\` (å­—ç¬¦ä¸²/æ•°å­—/å¸ƒå°”)
   - âœ… \`è¡¨å•.formData.type === 'ä¼ä¸š'\`

3. **æ•°å€¼æ¯”è¾ƒ**: \`Node.field > number\` (æ”¯æŒ \`>\`, \`<\`, \`>=\`, \`<=\`, \`!==\`)
   - âœ… \`è¯„åˆ†.score >= 60\`

### 5.3 å¤åˆé€»è¾‘ â†’ ä¸²è”èŠ‚ç‚¹

**OR é€»è¾‘**:  
âŒ \`xx.includes('A') || xx.includes('B')\`  
âœ… Branch1(åŒ…å«A) â†’ TRUEâ†’ç›®æ ‡ | FALSEâ†’ Branch2(åŒ…å«B) â†’ TRUEâ†’ç›®æ ‡

**AND é€»è¾‘**:  
âŒ \`age>=18 && verified===true\`  
âœ… Branch1(age>=18) â†’ TRUEâ†’ Branch2(verified) â†’ TRUEâ†’é€šè¿‡

## 6. Output èŠ‚ç‚¹
å·¥ä½œæµçš„æœ€ç»ˆå‡ºå£ã€‚

### 6.0 é…ç½®æ¦‚è§ˆ
| æ¨¡å¼ | sources è¦æ±‚ | é€‚ç”¨åœºæ™¯ | å…¶ä»–å­—æ®µ |
|------|-------------|---------|---------|
| \`direct\` | é•¿åº¦ = 1 | å• LLM ç›´å‡º (æœ€å¸¸ç”¨) | \`attachments\` å¯é€‰ |
| \`select\` | é•¿åº¦ > 1 | Branch åˆ†æ”¯ (è¾“å‡ºé¦–ä¸ªéç©ºå€¼) | \`attachments\` å¯é€‰ |
| \`merge\` | é•¿åº¦ > 1 | å¤šæºå†…å®¹æ‹¼æ¥ (åŒæ¢è¡Œåˆ†éš”) | \`attachments\` å¯é€‰ |
| \`template\` | ä¸éœ€è¦ sources | æ ¼å¼åŒ–æŠ¥å‘Š (è‡ªå®šä¹‰æ¨¡æ¿) | éœ€é…ç½® \`template\` å­—æ®µ |

> ğŸ”´ **merge vs template é“å¾‹**
> - **merge**: sources.value å¿…é¡»æ˜¯**çº¯å˜é‡** (å¦‚ \`{{A.response}}\`)ï¼ŒâŒ ç¦æ­¢æ··å…¥é™æ€æ–‡æœ¬
> - **template**: ç”¨ \`template\` å­—æ®µå†™å¸¦æ ¼å¼çš„æ¨¡æ¿ (å¦‚ \`## æ ‡é¢˜\\n{{A.response}}\`)

### 6.1 é…ç½®ç¤ºä¾‹
\`\`\`json
// merge: çº¯å˜é‡æ‹¼æ¥
{"mode": "merge", "sources": [{"type": "variable", "value": "{{æ‘˜è¦.response}}"}, {"type": "variable", "value": "{{è¯¦æƒ….response}}"}]}

// template: è‡ªå®šä¹‰æ ¼å¼
{"mode": "template", "template": "## æ‘˜è¦\\n{{æ‘˜è¦.response}}\\n\\n## è¯¦æƒ…\\n{{è¯¦æƒ….response}}"}
\`\`\`
`;
