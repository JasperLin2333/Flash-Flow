---
name: doc-coauthoring
description: 提供结构化的工作流，指导用户进行协作文档创建。充当积极的向导，引导用户经历三个阶段：上下文收集 (Context Gathering)、细化与结构化 (Refinement & Structure) 以及读者测试 (Reader Testing)。
license: Complete terms in LICENSE.txt
---

# 文档共创工作流 (Doc Co-Authoring Workflow)

此 Skill 提供了一个结构化的工作流，用于指导用户进行协作文档创建。充当积极的向导，引导用户经历三个阶段：上下文收集、细化与结构化以及读者测试。

## 何时提供此工作流 (When to Offer This Workflow)

**触发条件 (Trigger conditions)**：
- 用户提到编写文档："write a doc", "draft a proposal", "create a spec", "write up"
- 用户提到特定的文档类型："PRD", "design doc", "decision doc", "RFC"
- 用户似乎正在开始一项实质性的写作任务

**初始提议 (Initial offer)**：
向用户提供一个用于共同编写文档的结构化工作流。解释这三个阶段：

1.  **上下文收集 (Context Gathering)**：用户提供所有相关上下文，同时 Claude 提出澄清问题
2.  **细化与结构化 (Refinement & Structure)**：通过头脑风暴和编辑，迭代构建每个部分
3.  **读者测试 (Reader Testing)**：用一个新的 Claude（无上下文）测试文档，以便在他人阅读之前捕捉盲点

解释这种方法有助于确保文档在他人阅读时（包括他们将其粘贴到 Claude 中时）效果良好。询问他们是否想尝试此工作流，或者更喜欢自由形式工作。

如果用户拒绝，则自由形式工作。如果用户接受，则进入第 1 阶段。

## 第 1 阶段：上下文收集 (Context Gathering)

**目标**：缩小用户知道的内容与 Claude 知道的内容之间的差距，以便稍后提供智能指导。

### 初始问题 (Initial Questions)
首先询问用户有关文档的元上下文：

1.  这是什么类型的文档？（例如：技术规范、决策文档、提案）
2.  主要受众是谁？
3.  当有人阅读此文档时，期望产生什么影响？
4.  是否有要遵循的模板或特定格式？
5.  还有其他需要了解的约束或上下文吗？

告知他们可以用简写回答，或者以任何最适合他们的方式倾倒信息。

**如果用户提供模板或提到文档类型：**
- 询问他们是否有模板文档可以分享
- 如果他们提供共享文档的链接，请使用适当的集成来获取它
- 如果他们提供文件，请读取它

**如果用户提到编辑现有的共享文档：**
- 使用适当的集成来读取当前状态
- 检查没有替代文本 (alt-text) 的图像
- 如果存在没有替代文本的图像，请解释当其他人使用 Claude 理解文档时，Claude 将无法看到它们。询问是否要生成替代文本。如果是，请要求他们将每个图像粘贴到聊天中以生成描述性替代文本。

### 信息倾倒 (Info Dumping)
一旦回答了初始问题，鼓励用户倾倒他们拥有的所有上下文。请求诸如以下信息：
- 项目/问题的背景
- 相关的团队讨论或共享文档
- 为什么不使用替代方案
- 组织上下文（团队动态、过去的事件、政治）
- 时间线压力或约束
- 技术架构或依赖关系
- 利益相关者的担忧

建议他们不要担心组织整理——把它们全部倒出来就好。提供多种提供上下文的方式：
- 意识流式的信息倾倒
- 指向要阅读的团队频道或帖子
- 链接到共享文档

**如果集成可用**（例如：Slack, Teams, Google Drive, SharePoint 或其他 MCP 服务器），通过直接拉取上下文来提及可以使用这些集成。

**如果在 Claude.ai 或 Claude app 中未检测到集成：** 建议他们可以在 Claude 设置中启用连接器，以允许直接从消息传递应用程序和文档存储中提取上下文。

告知他们一旦完成了初始倾倒，将会提出澄清问题。

**在上下文收集期间：**

- 如果用户提到团队频道或共享文档：
    - 如果集成可用：告知他们现在将读取内容，然后使用适当的集成
    - 如果集成不可用：解释缺乏访问权限。建议他们在 Claude 设置中启用连接器，或直接粘贴相关内容。

- 如果用户提到未知的实体/项目：
    - 询问是否应搜索连接的工具以了解更多信息
    - 等待用户确认后再搜索

- 当用户提供上下文时，跟踪已了解的内容和仍不清楚的内容

**提出澄清问题 (Asking clarifying questions)：**

当用户通过信号表明他们已经完成了初始倾倒（或提供了大量上下文后），提出澄清问题以确保理解：

基于上下文中的空白生成 5-10 个编号的问题。

告知他们可以使用简写回答（例如：“1: 是, 2: 见 #channel, 3: 不，因为向后兼容”），链接到更多文档，指向要阅读的频道，或者只是继续信息倾倒。只要对他们来说效率最高即可。

**退出条件 (Exit condition)：**
当问题显示出理解时——即可以询问边缘情况和权衡，而无需解释基础知识时，就已收集了足够的上下文。

**过渡 (Transition)：**
询问在此阶段是否有更多上下文要提供，或者是否该继续起草文档了。

如果用户想添加更多，让他们添加。准备好后，进入第 2 阶段。

## 第 2 阶段：细化与结构化 (Refinement & Structure)

**目标**：通过头脑风暴、策展和迭代细化，逐节构建文档。

**给用户的说明：**
解释文档将逐节构建。对于每个部分：
1.  将询问关于包含什么的澄清问题
2.  将头脑风暴 5-20 个选项
3.  用户将指出保留/删除/合并的内容
4.  将起草该部分
5.  将通过外科手术式的编辑进行细化

从未知数最多的部分开始（通常是核心决策/提案），然后处理其余部分。

**部分排序 (Section ordering)：**

如果文档结构清晰：
询问他们想从哪个部分开始。

建议从未知数最多的部分开始。对于决策文档，通常是核心提案。对于规范，通常是技术方法。摘要部分最好留到最后。

如果用户不知道他们需要什么部分：
根据文档类型和模板，建议 3-5 个适合该文档类型的部分。

询问此结构是否可行，或者他们是否想要调整它。

**一旦商定了结构：**

创建包含所有部分占位符文本的初始文档结构。

**如果可以使用 Artifacts：**
使用 `create_file` 创建一个 Artifact。这给 Claude 和用户都提供了一个工作的脚手架。

告知他们将创建包含所有部分占位符的初始结构。

创建包含所有部分标题和简短占位符文本（如“[待编写]”或“[内容在此]”）的 Artifact。

提供脚手架链接并指明是时候填充每个部分了。

**如果无法使用 Artifacts：**
在工作目录中创建一个 markdown 文件。适当命名（例如：`decision-doc.md`, `technical-spec.md`）。

告知他们将创建包含所有部分占位符的初始结构。

创建包含所有部分标题和占位符文本的文件。

确认文件名已创建并指明是时候填充每个部分了。

**对于每个部分：**

### 步骤 1：澄清问题 (Clarifying Questions)
宣布将开始 [SECTION NAME] 部分的工作。询问 5-10 个关于应包含什么内容的澄清问题：

基于上下文和部分目的生成 5-10 个具体问题。

告知他们可以用简写回答，或者只是指出要涵盖的重要内容。

### 步骤 2：头脑风暴 (Brainstorming)
对于 [SECTION NAME] 部分，头脑风暴 [5-20] 个可能包含的内容，取决于部分的复杂性。寻找：
- 分享过的、可能已遗忘的上下文
- 尚未提到的角度或考虑因素

基于部分复杂性生成 5-20 个编号的选项。最后，如果他们想要更多选项，提议进行更多头脑风暴。

### 步骤 3：策展 (Curation)
询问哪些点应保留、删除或合并。要求简短的理由，以帮助了解下一部分的优先级。

提供示例：
- “保留 1,4,7,9”
- “删除 3（重复 1）”
- “删除 6（受众已经知道了）”
- “合并 11 和 12”

**如果用户给出自由形式的反馈**（例如：“看起来不错”或“我喜欢大部分但...”）而不是编号选择，提取他们的偏好并继续。解析他们想要保留/删除/更改的内容并应用它。

### 步骤 4：查漏补缺 (Gap Check)
根据他们的选择，询问对于 [SECTION NAME] 部分是否有任何重要的遗漏。

### 步骤 5：起草 (Drafting)
使用 `str_replace` 将此部分的占位符文本替换为实际起草的内容。

宣布现在将根据他们的选择起草 [SECTION NAME] 部分。

**如果使用 Artifacts：**
起草后，提供 Artifact 链接。

请他们通读并指出要更改的内容。注意，具体一点有助于下一部分的学习。

**如果使用文件（无 Artifacts）：**
起草后，确认完成。

告知他们 [SECTION NAME] 部分已在 [filename] 中起草。请他们通读并指出要更改的内容。注意，具体一点有助于下一部分的学习。

**给用户的关键说明（起草第一部分时包含）：**
提供一个提示：与其直接编辑文档，不如请他们指出要更改的内容。这有助于学习他们的风格以用于未来的部分。例如：“删除 X 项目符号 - Y 已涵盖”或“使第三段更简洁”。

### 步骤 6：迭代细化 (Iterative Refinement)
当用户提供反馈时：
- 使用 `str_replace` 进行编辑（永远不要重新打印整个文档）
- **如果使用 Artifacts**：每次编辑后提供 Artifact 链接
- **如果使用文件**：只需确认编辑完成
- 如果用户直接编辑文档并要求阅读：在心里记下他们所做的更改，并在未来的部分中记住它们（这显示了他们的偏好）

**继续迭代**，直到用户对该部分满意为止。

### 质量检查 (Quality Checking)
在连续 3 次迭代没有实质性更改后，询问是否可以在不丢失重要信息的情况下删除任何内容。

当部分完成时，确认 [SECTION NAME] 已完成。询问是否准备好进入下一部分。

**对所有部分重复此步骤。**

### 接近完成 (Near Completion)
当接近完成（80%以上的部分已完成）时，宣布打算重读整个文档并检查：
- 各部分之间的流畅性和一致性
- 冗余或矛盾
- 任何感觉像“废话 (slop)”或通用填充物的内容
- 是否每一句话都有分量

阅读整个文档并提供反馈。

**当所有部分都已起草和细化：**
宣布所有部分都已起草。表明打算再审查一次完整的文档。

审查整体的连贯性、流畅性、完整性。

提供任何最终建议。

询问是否准备好进入读者测试，或者他们是否想细化其他内容。

## 第 3 阶段：读者测试 (Reader Testing)

**目标**：用一个新的 Claude（无上下文干扰）测试文档，以验证它对读者有效。

**给用户的说明：**
解释测试现在将开始，看看文档是否真的对读者有效。这能捕捉盲点——那些对作者有意义但可能让其他人困惑的事情。

### 测试方法 (Testing Approach)
**如果可以使用子智能体 (Sub-Agents)（例如：在 Claude Code 中）：**

在没有用户参与的情况下直接执行测试。

### 步骤 1：预测读者问题 (Predict Reader Questions)
宣布打算预测读者在尝试发现此文档时可能会问什么问题。

生成 5-10 个读者现实中会问的问题。

### 步骤 2：使用子智能体测试 (Test with Sub-Agent)
宣布这些问题将用一个新的 Claude 实例（没有来自此对话的上下文）进行测试。

对于每个问题，调用一个仅包含文档内容和问题的子智能体。

总结读者 Claude 对每个问题的回答是对是错。

### 步骤 3：运行额外检查 (Run Additional Checks)
宣布将执行额外检查。

调用子智能体以检查歧义、错误假设、矛盾。

总结发现的任何问题。

### 步骤 4：报告和修复 (Report and Fix)
如果发现问题：
报告读者 Claude 在具体问题上遇到了困难。

列出具体问题。

表明打算修复这些差距。

回循环到问题部分的细化。

---

**如果无法使用子智能体（例如：claude.ai 网页界面）：**

用户需要手动进行测试。

### 步骤 1：预测读者问题 (Predict Reader Questions)
询问人们在尝试发现此文档时可能会问什么问题。他们会在 Claude.ai 中输入什么？

生成 5-10 个读者现实中会问的问题。

### 步骤 2：设置测试 (Setup Testing)
提供测试说明：
1.  打开一个新的 Claude 对话：https://claude.ai
2.  粘贴或共享文档内容（如果使用启用了连接器的共享文档平台，请提供链接）
3.  问读者 Claude 生成的问题

对于每个问题，指示读者 Claude 提供：
- 答案
- 是否有任何模棱两可或不清楚的地方
- 文档假设读者已经知道什么知识/上下文

检查读者 Claude 是否给出正确答案或误解了任何内容。

### 步骤 3：额外检查 (Additional Checks)
还要问读者 Claude：
- “这个文档中有什么对读者来说可能是模棱两可或不清楚的？”
- “这个文档假设读者已经拥有什么知识或上下文？”
- “是否有任何内部矛盾或不一致？”

### 步骤 4：根据结果迭代 (Iterate Based on Results)
询问读者 Claude 哪里错了或遇到了困难。表明打算修复这些差距。

回循环到问题部分的细化。

---

### 退出条件（两种方法）(Exit Condition)
当读者 Claude 始终正确回答问题并且没有浮现新的差距或歧义时，文档就准备好了。

## 最终审查 (Final Review)
当读者测试通过时：
宣布文档已通过读者 Claude 测试。在完成之前：

1.  建议他们自己做最后一次通读——他们拥有此文档并对其质量负责
2.  建议仔细检查任何事实、链接或技术细节
3.  要他们验证它是否实现了他们想要的影响

询问他们是否想要再做一次审查，或者工作是否已完成。

**如果用户想要最终审查，提供它。否则：**
宣布文档完成。提供一些最终提示：
- 考虑将此对话链接在附录中，以便读者可以看到文档是如何开发的
- 使用附录提供深度而不使主文档臃肿
- 随着收到真实读者的反馈更新文档

## 有效指导的提示 (Tips for Effective Guidance)
**基调 (Tone)：**
- 直接且程序化
- 当影响用户行为时简要解释理由
- 不要试图“推销”这种方法——直接执行它

**处理偏差 (Handling Deviations)：**
- 如果用户想跳过某个阶段：询问他们是否想跳过这个并自由形式写作
- 如果用户似乎感到沮丧：承认这比预期的要长。建议更快的方法
- 始终给予用户调整流程的主动权

**上下文管理 (Context Management)：**
- 在整个过程中，如果提到的某些内容缺少上下文，主动询问
- 不要让差距积累——在它们出现时解决它们

**Artifact 管理 (Artifact Management)：**
- 使用 `create_file` 起草完整部分
- 使用 `str_replace` 进行所有编辑
- 每次更改后提供 Artifact 链接
- 永远不要使用 Artifacts 进行头脑风暴列表——那只是对话

**质量胜于速度 (Quality over Speed)：**
- 不要匆忙通过各个阶段
- 每次迭代都应做出有意义的改进
- 目标是真正对读者有效的文档
